<script src="//cdn.jsdelivr.net/d3js/3.5.5/d3.min.js"></script>
<script src="/ext/d3.layout.cloud.js"></script>

<script>
var fill = d3.scale.category20();
var fontSize = d3.scale.linear().range([10, 100]).domain([{min}, {max}]);

var layout = d3.layout.cloud()
	.size([1250, 600])
	.padding(5)
	.rotate(0)
	.font('Impact')
	.fontSize(function(d) { return fontSize(+d.size); })
	.on('end', draw)
	.words({print json_encode($this->words);})
	.start();

function draw(words) {
	d3.select('body').append('svg')
		.attr('width', 1250)
		.attr('height', 600)
		.append('g')
		.attr('transform', 'translate(625,300)')
		.selectAll('text')
		.data(words)
		.enter().append('text')
		.style('font-size', function(d) { return d.size + 'px'; })
		.style('font-family', 'Impact')
		.style('fill', function(d, i) { return fill(i); })
		.attr('text-anchor', 'middle')
		.attr('transform', function(d) {
			return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')';
		})
		.text(function(d) { return d.text; });
}
</script>